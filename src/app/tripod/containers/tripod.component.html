<div class="container">
  <h1 class="mat-h1">
    트포 도시락
    <a
      class="mat-caption link"
      href="https://docs.google.com/presentation/d/e/2PACX-1vSlMEJp-IO2cRra6plkMMgUBbxZ2u6vMH4-dH2gEHunxGjgDe0RWq1NbllogmihF6Z3Ouc8S6mSh8lp/pub?start=false&loop=false&delayms=60000"
      target="_blank"
      >설명서</a
    >
  </h1>
  <div class="layout">
    <mat-card [formGroup]="formGroup" class="card">
      <mat-card-content>
        <mat-form-field>
          <mat-label>직업</mat-label>
          <mat-select formControlName="classCode">
            <mat-option *ngFor="let option of classList" [value]="option.value">
              {{ option.text }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-card-content>
      <mat-card-content formGroupName="categoryList">
        <mat-checkbox
          *ngFor="let category of categoryList"
          [formControlName]="category.value"
          >{{ category.text }}</mat-checkbox
        >
      </mat-card-content>
      <mat-card-content *ngIf="formGroup.value.classCode">
        <div class="tripod-form">
          <app-tripod-form
            *ngFor="let tripodForm of tripodFormControls"
            [formGroup]="tripodForm"
            [classCode]="formGroup.value.classCode"
          ></app-tripod-form>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-subtitle>경매장 검색</mat-card-subtitle>
      <mat-card-content>
        <button (click)="generate()" mat-raised-button color="primary">
          검색 코드 복사
        </button>
      </mat-card-content>
      <mat-card-subtitle>옵션</mat-card-subtitle>
      <mat-card-content [formGroup]="filterForm">
        <div>
          <mat-form-field>
            <mat-label> 구매 후 거래가능 횟수 </mat-label>
            <input formControlName="tradeLeft" matInput type="number" />
            <span matSuffix>회 이상</span>
          </mat-form-field>
        </div>
        <button (click)="applySearchResult()" mat-raised-button color="primary">
          적용
        </button>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="layout">
    <mat-card class="grow">
      <app-tripod-table
        [data]="composeResult"
        [selectedCategories]="selectedCategories"
        [filter]="lastFilter"
        [isLoading]="isLoading"
      ></app-tripod-table>
    </mat-card>
  </div>
</div>
